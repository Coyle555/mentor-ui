!function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=2)}([function(e,r,n){var t=n(3),o=n(4),i=n(5);e.exports=function(e){return t(e)||o(e)||i()}},function(e,r){e.exports=function(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}},function(e,r,n){"use strict";n.r(r);var t=n(0),o=n.n(t),i=n(1),l=n.n(i);function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){l()(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(e=a(e,r,n,"")).forEach((function(e){delete e.children})),e}function a(e,r,n){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[];if(0===e.length)return[];var l=0,c=-1,u=!0,f=!1,s=void 0;try{for(var p,h=e[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var g,v=p.value,y=Array.isArray(v.children)?v.children.length:0,b=d({childrenCount:y},v,{hasSibling:e[e.length-1]!==v,order:++c,path:t,level:r,parent:n}),O=[];v.expanded&&(O=a(v.children,r+1,null!==n?n+l+1:0,r?t.length?t+"."+c:""+c:"")),b.descendants=v.expanded?y+O.reduce((function(e,r){return e+r.children.length}),0):0,l+=b.descendants+1,i=(g=i).concat.apply(g,[b].concat(o()(O)))}}catch(e){f=!0,s=e}finally{try{u||null==h.return||h.return()}finally{if(f)throw s}}return i}self.onmessage=function(e){var r,n=e.data,t=n.draggedNode,o=n.hoveredNode,i=n.tree,l=n.droppedOnNewParent;r=0===o.level||1===o.level?i:i.children;var c=o.path?String(o.path).split("."):[];c.forEach((function(e,n){r=r[+e],n!==c.length-1&&(r=r.children)}));var d,a=r.children[o.order],f=t.path?String(t.path).split("."):[],s=i.children;if(1===t.level?(d=i.children[t.order],i.children=i.children.filter((function(e){return e.id!==d.id}))):f.forEach((function(e,r){s=s[+e],r!==f.length-1?s=s.children:(d=s.children[t.order],s.children.splice(t.order,1))})),l)if(0===o.level)i.children.push(d),console.log("insert at root",d,i,o,t);else{if(a.id===d.id)return void console.log("cant drop on self...",a,d,t,o);a.children.push(d)}else if(r.children[o.order])r.children.splice(o.order,0,d);else{if(r.id!==s.id)return console.log("couldnt find index to insert at",o.order),console.log({draggedNode:t,hoveredNode:o}),void console.log({insertNodeParent:r,removalNodeParent:s});r.children.push(d)}postMessage([i,u([i])])}},function(e,r){e.exports=function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}},function(e,r){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,r){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}}]);